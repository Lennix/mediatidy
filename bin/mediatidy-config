#!/usr/bin/env coffee

program = require 'commander'
prompt = require 'prompt'
async = require 'async'
Config = require '../lib/config'

program
  .option('-p, --path <movie directory>', 'the location where movies are stored')
  .option('-y, --yes', 'accept all defaults to questions')

program
  .command('paths-update')
  .description('update paths to media files for mediatidy to tidy up!')
  .action () ->
    config = new Config

    async.series [
      (seriesCallback) ->
        config.setup ->
          seriesCallback()
      (seriesCallback) ->
        config.pathPrompt ->
          seriesCallback()
    # optional callback
    ], (err, results) ->
      # console.log 'Results:', results

program
  .command('paths-clear')
  .description('clear paths to media files for mediatidy')
  .action () ->
    config = new Config

    async.series [
      (seriesCallback) ->
        config.setup ->
          seriesCallback()
      (seriesCallback) ->
        config.pathsDelete ->
          seriesCallback()
    # optional callback
    ], (err, results) ->
      # console.log 'Results:', results

program.parse process.argv

program.help() if program.args.length is 0
