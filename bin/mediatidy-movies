#!/usr/bin/env coffee

program = require 'commander'
Config = require '../lib/config'
Movies = require '../lib/movies'

program.option('-a, --apiurl <apiurl>', 'API base URL')
  .option('-c, --clientid <clientid>', 'OAuth2 Client ID')
  .option('-s, --clientsecret <clientsecret>', 'OAuth2 Client secret')
  .option('-j, --json', 'display results in JSON')

program.command('update')
  .description('look for new movies')
  .action () ->
    movie = new Movies Config.get('path')
    movie.update (response) ->
      console.log response

program.parse process.argv

program.help() if program.args.length is 0
